<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Schedule Creation</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <!--navigation bar with logo and etc-->
    <div id="nav-bar">
        <a href="#">PLACEHOLDER!</a>
        <a href="#">PLACEHOLDER!</a>
        <a href="#">PLACEHOLDER!</a>
    </div>
    
<div id="background-container">
  <!-- Recurring and One-Time Toggle -->
  <div class="toggle-container">
    <button id="weekly-btn" class="toggle-btn active">Weekly</button>
    <button id="one-time-btn" class="toggle-btn">One-Time</button>
  </div>

  <!-- Form Section -->
  <div id="form-container">

    <!-- Recurring Form -->
    <form id="recurring-form" class="schedule-form active" action="save_schedule.php" method="POST" onsubmit="return validationForm()">
      {% csrf_token %}
      <h2>Schedule Weekly Recurring Event</h2>
      <label><input type="text" name="event-name" required placeholder="Event Name: "></label>
      <label><input type="text" name="location" required placeholder="Location/Video Call URL:"></label>     
      <label for="start-time" style="display: inline-block; margin-right: 10px; font-size: 10; color: grey;">Start Time:
        <input type="datetime-local" name="start-time" style="display: inline-block;" required></label>
        </br>
        <label for="end-time" style="display: inline-block; margin-right: 10px; font-size: 10; color: grey;">End Time:
            <input type="datetime-local" name="end-time" style="display: inline-block;" required></label>
      <label><input type="number" name="participants" required placeholder="Number of Participants Allowed: "></label>
      <label>Time Slot Length: </br>
        <select name="slot-length">
            <option value="slot-length-1">15 minutes</option>
            <option value="slot-length-2">30 minutes</option>
            <option value="slot-length-3">45 minutes</option>
            <option value="slot-length-4">1 hour</option>
            <option value="slot-length-5">NA</option>
        </select>
      </label>
      <label>Calendar: </br>
        <select name="calendar">
            <!-- to be dynmaic depending on the calendar options eg. COMP307 OH calendar-->
          <option value="calendar-1">Calendar 1</option>
          <option value="calendar-2">Calendar 2</option>
        </select>
      </label>
      <label><textarea name="notes" placeholder="Notes/Attachments: "></textarea></label>
      <button type="reset" class="reset-btn">Reset</button>
      <button type="submit" class="save-btn">Save</button>
    </form>

    <!-- One-Time Form -->
    <form id="one-time-form" class="schedule-form" onsubmit="return validationForm()">
      <h2>Schedule One-Time Event</h2>
      <label><input type="text" name="event-name" placeholder="Event Name: "></label>
      <label><input type="text" name="location" placeholder="Location/Video Call URL:"></label>     
      <label for="start-time" style="display: inline-block; margin-right: 10px; font-size: 10; color: grey;">Start Time:
        <input type="datetime-local" name="start-time" style="display: inline-block;"></label>
        </br>
        <label for="end-time" style="display: inline-block; margin-right: 10px; font-size: 10; color: grey;">End Time:
            <input type="datetime-local" name="end-time" style="display: inline-block;"></label>
      <label><input type="number" name="participants" placeholder="Number of Participants Allowed: "></label>
      <label>Time Slot Length: </br>
        <select name="slot-length">
            <option value="slot-length-1">15 minutes</option>
            <option value="slot-length-2">30 minutes</option>
            <option value="slot-length-3">45 minutes</option>
            <option value="slot-length-4">1 hour</option>
            <option value="slot-length-5">NA</option>
        </select>
      </label>
      <label>Calendar: </br>
        <select name="calendar">
            <!-- to be dynmaic depending on the calendar options eg. COMP307 OH calendar-->
          <option value="calendar-1">Calendar 1</option>
          <option value="calendar-2">Calendar 2</option>
        </select>
      </label>
      <label><textarea name="notes" placeholder="Notes/Attachments: "></textarea></label>
      <button type="reset" class="reset-btn">Reset</button>
      <button type="submit" class="save-btn">Save</button>
    </form>
  </div>
</div>

  <!-- Confirmation Pop-Up Modal -->
<div id="confirmation-popup" class="modal">
    <div class="modal-content">
    <span class="close-btn" id="close-popup">&times;</span>
    <p>Slot Scheduled! <br> A confirmation email has been sent to: <span id="email-display">[Email]</span></p>
    <p>Information: <span id="popup-info">[Event details go here]</span></p>
    <p>Link to Share: <span id="link-display">[Link]</span></p>
    <button id="copy-link" class="modal-btn">Copy Link</button>
    <button id="return-home" class="modal-btn">Home</button>
    </div>
</div> 
<script>
  // JavaScript to get the event details from the URL and display them in the confirmation popup
  window.onload = function() {
      // Check if the page URL has the query parameters
      const urlParams = new URLSearchParams(window.location.search);
  
      // Get event details from the URL
      const eventName = urlParams.get('event_name');
      const location = urlParams.get('location');
      const startTime = urlParams.get('start_time');
      const endTime = urlParams.get('end_time');
      const participants = urlParams.get('participants');
      const slot = urlParams.get('slot');
      const calendar = urlParams.get('calendar');
      const notes = urlParams.get('notes');
  
      // If event details are present, display them in the modal
      if (eventName && location && startTime && endTime && participants && slot && calendar && notes) {
          document.getElementById('popup-info').innerText = `
              Event: ${eventName}
              \nLocation: ${location}
              \nStart Time: ${startTime}
              \nEnd Time: ${endTime}
              \nParticipants: ${participants}
              \nSlot Length: ${slot} minutes
              \nCalendar: ${calendar}
              \nNotes: ${notes}
          `;
  
          // Display the confirmation popup
          document.getElementById('confirmation-popup').style.display = "block";
      }
  };
  
  // Close the confirmation popup when the user clicks the close button
  document.getElementById('close-popup').onclick = function() {
      document.getElementById('confirmation-popup').style.display = "none";
  }
  </script>

  <script src="scripts.js"></script>
</body>
</html>
